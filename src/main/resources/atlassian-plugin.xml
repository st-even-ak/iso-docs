<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}" />
        <param name="plugin-icon">images/itg-logo.png</param>
        <param name="plugin-logo">images/itg-logo.png</param>
    </plugin-info>


    <!-- add our i18n resource -->
    <resource type="i18n" name="itg-documents.properties" location="itg-documents"/>


    <!-- add our web resources -->
    <web-resource key="itg-documents-resources" name="itg-documents Web Resources">
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.confluence.plugins.confluence-create-content-plugin:resources</dependency>

        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>

        <!-- transform Soy templates into JS -->
        <transformation extension="soy">
            <transformer key="soyTransformer">
                <functions>com.atlassian.confluence.plugins.soy:soy-core-functions
                </functions>
            </transformer>
        </transformation>

        <resource type="download" name="itg-documents.css" location="/css/itg-documents.css" />
        <resource type="download" name="itg-documents.js" location="/js/itg-documents.js" />
        <resource type="download" name="itg-documents.soy.js" location="/soy/itg-documents.soy" />
        <resource type="download" name="images/" location="/images" />

        <context>itg-documents</context>
        <context>atl.general</context>
        <context>atl.admin</context>
    </web-resource>

        <!-- Add to the Create Menu -->
    <web-item key="create-itg-document" i18n-name-key="itg.create.document.name" section="system.create.dialog/content">
        <description key="itg.create.document.description" />
        <resource name="icon" type="download" location="/images/itg-logo.png" />
        <param name="blueprintKey" value="itg-blueprint" />
    </web-item>

    <!-- Blueprint -->
    <blueprint key="itg-blueprint" i18n-name-key='itg-blueprint' index-key="create-itg-document-index" create-result="view">
        <content-template ref="itg-brief-template" />
        <content-template ref="itg-release-note-template" />
        <content-template ref="itg-change-request-template" />
        <dialog-wizard key="itg-blueprint-wizard">
            <dialog-page id="templateSelectionForm" template-key="com.itg.plugins.itg.blueprints.templateSelectionForm"
                title-key="itg.blueprint.wizard.templateSelectionForm.title"
                description-header-key="itg.blueprint.wizard.templateSelectionForm.desc.header"
                description-content-key="itg.blueprint.wizard.templateSelectionForm.desc.content"/>
            <!-- Brief Wizard Path Pages -->
            <dialog-page id="briefProperties" template-key="com.itg.plugins.itg.blueprints.briefProperties"
                title-key="itg.blueprint.wizard.briefProperties.title"
                description-header-key="itg.blueprint.wizard.briefProperties.desc.header"
                description-content-key="itg.blueprint.wizard.briefProperties.desc.content"/>
            <dialog-page id="briefSummary" template-key="com.itg.plugins.itg.blueprints.briefSummary"
                title-key="itg.blueprint.wizard.briefSummary.title"
                description-header-key="itg.blueprint.wizard.briefSummary.desc.header"
                description-content-key="itg.blueprint.wizard.briefSummary.desc.content"/>
            <dialog-page id="briefBackground" template-key="com.itg.plugins.itg.blueprints.briefBackground"
                title-key="itg.blueprint.wizard.briefBackground.title"
                description-header-key="itg.blueprint.wizard.briefBackground.desc.header"
                description-content-key="itg.blueprint.wizard.briefBackground.desc.content"/>
            <dialog-page id="briefObjectives" template-key="com.itg.plugins.itg.blueprints.briefObjectives"
                title-key="itg.blueprint.wizard.briefObjectives.title"
                description-header-key="itg.blueprint.wizard.briefObjectives.desc.header"
                description-content-key="itg.blueprint.wizard.briefObjectives.desc.content"/>
            <dialog-page id="briefRequirements" template-key="com.itg.plugins.itg.blueprints.briefRequirements"
                title-key="itg.blueprint.wizard.briefRequirements.title"
                description-header-key="itg.blueprint.wizard.briefRequirements.desc.header"
                description-content-key="itg.blueprint.wizard.briefRequirements.desc.content"/>
            <dialog-page id="briefBenefits" template-key="com.itg.plugins.itg.blueprints.briefBenefits"
                title-key="itg.blueprint.wizard.briefBenefits.title"
                description-header-key="itg.blueprint.wizard.briefBenefits.desc.header"
                description-content-key="itg.blueprint.wizard.briefBenefits.desc.content"/>
            <dialog-page id="briefScope" template-key="com.itg.plugins.itg.blueprints.briefScope"
                title-key="itg.blueprint.wizard.briefScope.title"
                description-header-key="itg.blueprint.wizard.briefScope.desc.header"
                description-content-key="itg.blueprint.wizard.briefScope.desc.content"/>
            <dialog-page id="briefTimeframe" template-key="com.itg.plugins.itg.blueprints.briefTimeframe"
                title-key="itg.blueprint..wizard.briefTimeframe.title"
                description-header-key="itg.blueprint.wizard.briefTimeframe.desc.header"
                description-content-key="itg.blueprint.wizard.briefTimeframe.desc.content"/>
            <dialog-page id="briefRisks" template-key="com.itg.plugins.itg.blueprints.briefRisks"
                title-key="itg.blueprint.wizard.briefRisks.title"
                description-header-key="itg.blueprint.wizard.briefRisks.desc.header"
                description-content-key="itg.blueprint.wizard.briefRisks.desc.content"/>
            <dialog-page id="briefConstraints" template-key="com.itg.plugins.itg.blueprints.briefConstraints"
                title-key="itg.blueprint.wizard.briefConstraints.title"
                description-header-key="itg.blueprint.wizard.briefConstraints.desc.header"
                description-content-key="itg.blueprint.wizard.briefConstraints.desc.content"/>
            <dialog-page id="briefStakeholders" template-key="com.itg.plugins.itg.blueprints.briefStakeholders"
                title-key="itg.blueprint.wizard.briefStakeholders.title"
                description-header-key="itg.blueprint.wizard.briefStakeholders.desc.header"
                description-content-key="itg.blueprint.wizard.briefStakeholders.desc.content"
                last="true"/>

            <!-- ReleaseNote Wizard Path Pages -->
            <dialog-page id="releaseNoteProperties" template-key="com.itg.plugins.itg.blueprints.releaseNoteProperties"
                title-key="itg.blueprint.wizard.releaseNoteProperties.title"
                description-header-key="itg.blueprint.wizard.releaseNoteProperties.desc.header"
                description-content-key="itg.blueprint.wizard.releaseNoteProperties.desc.content" />
            <dialog-page id="releaseNoteSummary" template-key="com.itg.plugins.itg.blueprints.releaseNoteSummary"
                title-key="itg.blueprint.wizard.releaseNoteSummary.title"
                description-header-key="itg.blueprint.wizard.releaseNoteSummary.desc.header"
                description-content-key="itg.blueprint.wizard.releaseNoteSummary.desc.content" />
            <dialog-page id="releaseMethodStatement" template-key="com.itg.plugins.itg.blueprints.releaseNoteMethodStatement"
                title-key="itg.blueprint.wizard.releaseMethodStatements.title"
                description-header-key="itg.blueprint.wizard.releaseMethodStatement.desc.header"
                description-content-key="itg.blueprint.wizard.releaseMethodStatement.desc.content" />
            <dialog-page id="releaseNoteRisks" template-key="com.itg.plugins.itg.blueprints.releaseNoteRisks"
                title-key="itg.blueprint.wizard.releaseNoteRisks.title"
                description-header-key="itg.blueprint.wizard.releaseNoteRisks.desc.header"
                description-content-key="itg.blueprint.wizard.releaseNoteRisks.desc.content" />
            <dialog-page id="releaseNoteAuthority" template-key="com.itg.plugins.itg.blueprints.releaseNoteAuthority"
                title-key="itg.blueprint.wizard.releaseNoteAuthority.title"
                description-header-key="itg.blueprint.wizard.releaseNoteAuthority.desc.header"
                description-content-key="itg.blueprint..wizard.releaseNoteAuthority.desc.content"
                last="true" />
                
            <!-- changeRequest Wizard Path Pages -->
            <dialog-page id="changeRequestProperties" template-key="com.itg.plugins.itg.blueprints.changeRequestProperties"
                title-key="itg.blueprint.wizard.changeRequestProperties.title"
                description-header-key="itg.blueprint.wizard.changeRequestProperties.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestProperties.desc.content"/>
            <dialog-page id="changeRequestSummary" template-key="com.itg.plugins.itg.blueprints.changeRequestSummary"
                title-key="itg.blueprint.wizard.changeRequestSummary.title"
                description-header-key="itg.blueprint.wizard.changeRequestSummary.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestSummary.desc.content"/>
            <dialog-page id="changeRequestBackground" template-key="com.itg.plugins.itg.blueprints.changeRequestBackground"
                title-key="itg.blueprint.wizard.changeRequestBackground.title"
                description-header-key="itg.blueprint.wizard.changeRequestBackground.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestBackground.desc.content"/>
            <dialog-page id="changeRequestObjectives" template-key="com.itg.plugins.itg.blueprints.changeRequestObjectives"
                title-key="itg.blueprint.wizard.changeRequestObjectives.title"
                description-header-key="itg.blueprint..wizard.changeRequestObjectives.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestObjectives.desc.content"/>
            <dialog-page id="changeRequestRequirements" template-key="com.itg.plugins.itg.blueprints.changeRequestRequirements"
                title-key="itg.blueprint.wizard.changeRequestRequirements.title"
                description-header-key="itg.blueprint.wizard.changeRequestRequirements.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestRequirements.desc.content"/>
            <dialog-page id="changeRequestBenefits" template-key="com.itg.plugins.itg.blueprints.changeRequestBenefits"
                title-key="itg.blueprint.wizard.changeRequestBenefits.title"
                description-header-key="itg.blueprint.wizard.changeRequestBenefits.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestBenefits.desc.content"/>
            <dialog-page id="changeRequestScope" template-key="com.itg.plugins.itg.blueprints.changeRequestScope"
                title-key="itg.blueprint.wizard.changeRequestScope.title"
                description-header-key="itg.blueprint.wizard.changeRequestScope.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestScope.desc.content"/>
            <dialog-page id="changeRequestTimeframe" template-key="com.itg.plugins.itg.blueprints.changeRequestTimeframe"
                title-key="itg.blueprint.wizard.changeRequestTimeframe.title"
                description-header-key="itg.blueprint.wizard.changeRequestTimeframe.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestTimeframe.desc.content"/>
            <dialog-page id="changeRequestRisks" template-key="com.itg.plugins.itg.blueprints.changeRequestRisks"
                title-key="itg.blueprint.wizard.changeRequestRisks.title"
                description-header-key="itg.blueprint.wizard.changeRequestRisks.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestRisks.desc.content"/>
            <dialog-page id="changeRequestConstraints" template-key="com.itg.plugins.itg.blueprints.changeRequestConstraints"
                title-key="itg.blueprint.wizard.changeRequestConstraints.title"
                description-header-key="itg.blueprint.wizard.changeRequestConstraints.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestConstraints.desc.content"/>
            <dialog-page id="changeRequestStakeholders" template-key="com.itg.plugins.itg.blueprints.changeRequestStakeholders"
                title-key="itg.blueprint.wizard.changeRequestStakeholders.title"
                description-header-key="itg.blueprint.wizard.changeRequestStakeholders.desc.header"
                description-content-key="itg.blueprint.wizard.changeRequestStakeholders.desc.content"
                last="true"/>
                 -->
        </dialog-wizard>
        
    </blueprint>

    <!-- Template for Brief -->
    <content-template key="itg-brief-template" i18n-name-key="itg-brief-template" template-title-key="itg.blueprint.brief.title">
        <resource name="template" type="download" location="/templates/itg_brief_template.xml" />
    </content-template>

    <!-- Template for Release Note -->
    <content-template key="itg-release-note-template" i18n-name-key="itg-release-note-template" template-title-key="itg.blueprint.release-note.title">
        <resource name="template" type="download" location="/templates/itg_release_note_template.xml" />
    </content-template>

    <!-- Template for Change Request  -->
    <content-template key="itg-change-request-template" i18n-name-key="itg-change-request-template" template-title-key="itg.blueprint.change-request.title">
        <resource name="template" type="download" location="/templates/itg_change_request_template.xml" />
    </content-template>

</atlassian-plugin>
